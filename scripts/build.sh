#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏ Hugo —Å–∞–π—Ç–∞

echo "üî® –ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É —Å–∞–π—Ç–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Hugo
if ! command -v hugo &> /dev/null; then
    echo "‚ùå Hugo –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Hugo –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è."
    echo "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: https://gohugo.io/installation/"
    exit 1
fi

# –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å–±–æ—Ä–∫—É
echo "üßπ –û—á–∏—â–∞–µ–º –ø–∞–ø–∫—É public..."
rm -rf public

# –°–æ–±–∏—Ä–∞–µ–º —Å–∞–π—Ç —Å –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
echo "üì¶ –°–æ–±–∏—Ä–∞–µ–º —Å–∞–π—Ç —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏..."
hugo --minify --gc --cleanDestinationDir

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
if [ $? -eq 0 ]; then
    echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
    echo "üìÅ –§–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ 'public/'"
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä
    echo "üìä –†–∞–∑–º–µ—Ä —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–∞–π—Ç–∞:"
    du -sh public/
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Å–∞–π—Ç–∞!"
    exit 1
fi